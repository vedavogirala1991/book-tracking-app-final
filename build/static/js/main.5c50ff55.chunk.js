(this["webpackJsonpbook-tracking-app"]=this["webpackJsonpbook-tracking-app"]||[]).push([[0],{186:function(e,t,o){},188:function(e,t,o){},190:function(e,t,o){"use strict";o.r(t);var n=o(0),r=o(3),c=o(91),s=o.n(c),a=o(193),i=(o(186),o(10)),l=o(11),u=o(13),h=o(12),b=o(194),f=o(195),j=function(e){Object(u.a)(o,e);var t=Object(h.a)(o);function o(){return Object(i.a)(this,o),t.apply(this,arguments)}return Object(l.a)(o,[{key:"render",value:function(){var e=this,t=this.props.book;return Object(n.jsxs)("div",{className:"book",children:[Object(n.jsxs)("div",{className:"book-top",children:[t.imageLinks?Object(n.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks.thumbnail,")")}}):Object(n.jsx)("div",{className:"book-cover-unavailable"}),Object(n.jsx)("div",{className:"book-shelf-changer",children:Object(n.jsxs)("select",{value:t.shelf,onChange:function(o){return n=o.target.value,e.props.moveBookToShelf(t,n);var n},children:[Object(n.jsx)("option",{value:"moveTo",disabled:!0,children:"Move to..."}),Object(n.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(n.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(n.jsx)("option",{value:"read",children:"Read"}),Object(n.jsx)("option",{value:"none",children:"None"})]})})]}),Object(n.jsx)("div",{className:"book-title",children:t.title}),Object(n.jsx)("div",{className:"book-authors",children:t.authors&&t.authors.join(", ")})]})}}]),o}(r.Component),d=function(e){Object(u.a)(o,e);var t=Object(h.a)(o);function o(){return Object(i.a)(this,o),t.apply(this,arguments)}return Object(l.a)(o,[{key:"render",value:function(){var e=this,t=this.props,o=t.shelfName,r=t.booksOnShelf;return Object(n.jsxs)("div",{className:"bookshelf",children:[Object(n.jsx)("h2",{className:"bookshelf-title",children:o}),Object(n.jsx)("div",{className:"bookshelf-books",children:Object(n.jsx)("ol",{className:"books-grid",children:Object(n.jsx)("li",{children:r.map((function(t){return Object(n.jsx)(j,{book:t,moveBookToShelf:function(t,o){return e.props.moveBookToShelf(t,o)}},t.id)}))})})})]})}}]),o}(r.Component),v=o(192),k=function(e){Object(u.a)(o,e);var t=Object(h.a)(o);function o(){var e;Object(i.a)(this,o);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).booksOnShelves=function(e,t){return e.filter((function(e){return e.shelf===t}))},e}return Object(l.a)(o,[{key:"render",value:function(){var e=this,t=this.props.books,o=t.filter((function(e){return"wantToRead"===e.shelf})),r=t.filter((function(e){return"currentlyReading"===e.shelf})),c=t.filter((function(e){return"read"===e.shelf}));return Object(n.jsxs)("div",{className:"list-books",children:[Object(n.jsx)("div",{className:"list-books-title",children:Object(n.jsx)("h1",{children:"My Reads"})}),Object(n.jsx)("div",{className:"list-books-content",children:Object(n.jsxs)("div",{children:[Object(n.jsx)(d,{shelfName:"Currently Reading",booksOnShelf:r,moveBookToShelf:function(t,o){return e.props.moveBookToShelf(t,o)}}),Object(n.jsx)(d,{shelfName:"Want to Read",booksOnShelf:o,moveBookToShelf:function(t,o){return e.props.moveBookToShelf(t,o)}}),Object(n.jsx)(d,{shelfName:"Read",booksOnShelf:c,moveBookToShelf:function(t,o){return e.props.moveBookToShelf(t,o)}})]})}),Object(n.jsx)("div",{className:"open-search",children:Object(n.jsx)(v.a,{to:"/search",children:"Add a book"})})]})}}]),o}(r.Component),p=o(31),O="https://reactnd-books-api.udacity.com",m=localStorage.token;m||(m=localStorage.token=Math.random().toString(36).substr(-8));var x={Accept:"application/json",Authorization:m},g=function(e,t){return fetch("".concat(O,"/books/").concat(e.id),{method:"PUT",headers:Object(p.a)(Object(p.a)({},x),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},y=function(e,t){return fetch("".concat(O,"/search"),{method:"POST",headers:Object(p.a)(Object(p.a)({},x),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))},S=function(e){Object(u.a)(o,e);var t=Object(h.a)(o);function o(){var e;Object(i.a)(this,o);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={books:[]},e.searchBooks=function(t,o){t?y(t.trim(),14).then((function(t){t.error?e.setState({books:[]}):(t.filter((function(e){var t=o.filter((function(t){return t.id===e.id}));return t&&t[0]?e.shelf=t[0].shelf:e.shelf="none",e})),e.setState((function(e){return{books:t}})))})):e.setState({books:[]})},e}return Object(l.a)(o,[{key:"render",value:function(){var e=this,t=this.props.myBooks;return Object(n.jsxs)("div",{className:"search-books",children:[Object(n.jsxs)("div",{className:"search-books-bar",children:[Object(n.jsx)(v.a,{className:"close-search",to:"/",children:"Close"}),Object(n.jsx)("div",{className:"search-books-input-wrapper",children:Object(n.jsx)("input",{type:"text",placeholder:"Search by title or author",onChange:function(o){return e.searchBooks(o.target.value,t)}})})]}),Object(n.jsx)("div",{className:"search-books-results",children:Object(n.jsx)("ol",{className:"books-grid",children:Object(n.jsx)("li",{children:this.state.books.map((function(t,o){return Object(n.jsx)(j,{book:t,moveBookToShelf:function(t,o){return e.props.moveBookToShelf(t,o)}},o)}))})})})]})}}]),o}(r.Component),N=function(e){Object(u.a)(o,e);var t=Object(h.a)(o);function o(){return Object(i.a)(this,o),t.apply(this,arguments)}return Object(l.a)(o,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"page-not-found"})}}]),o}(r.Component),w=(o(188),function(e){Object(u.a)(o,e);var t=Object(h.a)(o);function o(){var e;Object(i.a)(this,o);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={books:[]},e.moveBookToShelf=function(t,o){t.shelf!==o&&g(t,o).then((function(){t.shelf=o,e.setState((function(e){return{books:e.books.filter((function(e){return e.id!==t.id})).concat([t])}}))}))},e}return Object(l.a)(o,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(O,"/books"),{headers:x}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(t){e.setState({books:t})}))}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{className:"app",children:Object(n.jsxs)(b.a,{children:[Object(n.jsx)(f.a,{exact:!0,path:"/",render:function(){return Object(n.jsx)(k,{books:e.state.books,moveBookToShelf:function(t,o){return e.moveBookToShelf(t,o)}})}}),Object(n.jsx)(f.a,{path:"/search",render:function(){return Object(n.jsx)(S,{myBooks:e.state.books,moveBookToShelf:function(t,o){return e.moveBookToShelf(t,o)}})}}),Object(n.jsx)(f.a,{component:N})]})})}}]),o}(r.Component)),T=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function B(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(Object(n.jsx)(a.a,{children:Object(n.jsx)(w,{})}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");T?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):B(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):B(e)}))}}()}},[[190,1,2]]]);
//# sourceMappingURL=main.5c50ff55.chunk.js.map