{"ast":null,"code":"import _classCallCheck from\"C:/Users/vedav/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/vedav/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/vedav/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/vedav/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Component}from'react';import{Link}from'react-router-dom';import Book from'./Book';import*as BooksAPI from'./utils/BooksAPI';var MAX_RESULTS=14;var SearchBooks=/*#__PURE__*/function(_Component){_inherits(SearchBooks,_Component);var _super=_createSuper(SearchBooks);function SearchBooks(){var _this;_classCallCheck(this,SearchBooks);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={books:[]};_this.searchBooks=function(query,myBooks){if(query){BooksAPI.search(query.trim(),MAX_RESULTS).then(function(books){if(books.error){_this.setState({books:[]});}else{books.filter(function(b){var filteredBook=myBooks.filter(function(book){return book.id===b.id;});if(filteredBook&&filteredBook[0]){b.shelf=filteredBook[0].shelf;}else{b.shelf='none';}return b;});_this.setState(function(state){return{books:books};});}});}else{_this.setState({books:[]});}};return _this;}_createClass(SearchBooks,[{key:\"render\",value:function render(){var _this2=this;var myBooks=this.props.myBooks;return/*#__PURE__*/_jsxs(\"div\",{className:\"search-books\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-books-bar\",children:[/*#__PURE__*/_jsx(Link,{className:\"close-search\",to:\"/\",children:\"Close\"}),/*#__PURE__*/_jsx(\"div\",{className:\"search-books-input-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by title or author\",onChange:function onChange(event){return _this2.searchBooks(event.target.value,myBooks);}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"search-books-results\",children:/*#__PURE__*/_jsx(\"ol\",{className:\"books-grid\",children:/*#__PURE__*/_jsx(\"li\",{children:this.state.books.map(function(book,i){return/*#__PURE__*/_jsx(Book,{book:book,moveBookToShelf:function moveBookToShelf(book,shelf){return _this2.props.moveBookToShelf(book,shelf);}},i);})})})})]});}}]);return SearchBooks;}(Component);export default SearchBooks;","map":{"version":3,"sources":["D:/workspace/book-tracking-app/src/SearchBooks.js"],"names":["React","Component","Link","Book","BooksAPI","MAX_RESULTS","SearchBooks","state","books","searchBooks","query","myBooks","search","trim","then","error","setState","filter","b","filteredBook","book","id","shelf","props","event","target","value","map","i","moveBookToShelf"],"mappings":"woBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAO,GAAKC,CAAAA,QAAZ,KAA0B,kBAA1B,CAEA,GAAMC,CAAAA,WAAW,CAAG,EAApB,C,GAEMC,CAAAA,W,+UAEFC,K,CAAQ,CACJC,KAAK,CAAE,EADH,C,OAIRC,W,CAAc,SAACC,KAAD,CAAOC,OAAP,CAAmB,CAC7B,GAAGD,KAAH,CAAS,CACLN,QAAQ,CAACQ,MAAT,CAAgBF,KAAK,CAACG,IAAN,EAAhB,CAA8BR,WAA9B,EAA2CS,IAA3C,CAAgD,SAACN,KAAD,CAAW,CACvD,GAAGA,KAAK,CAACO,KAAT,CAAe,CACX,MAAKC,QAAL,CAAc,CAACR,KAAK,CAAE,EAAR,CAAd,EACH,CAFD,IAEO,CACHA,KAAK,CAACS,MAAN,CAAa,SAAAC,CAAC,CAAI,CACZ,GAAIC,CAAAA,YAAY,CAAGR,OAAO,CAACM,MAAR,CAAe,SAAAG,IAAI,QAAIA,CAAAA,IAAI,CAACC,EAAL,GAAUH,CAAC,CAACG,EAAhB,EAAnB,CAAnB,CACA,GAAGF,YAAY,EAAIA,YAAY,CAAC,CAAD,CAA/B,CAAmC,CAC/BD,CAAC,CAACI,KAAF,CAAUH,YAAY,CAAC,CAAD,CAAZ,CAAgBG,KAA1B,CACH,CAFD,IAEO,CACHJ,CAAC,CAACI,KAAF,CAAU,MAAV,CACH,CACD,MAAOJ,CAAAA,CAAP,CACL,CARD,EASA,MAAKF,QAAL,CAAc,SAAAT,KAAK,QAAI,CAACC,KAAK,CAAGA,KAAT,CAAJ,EAAnB,EACH,CAEJ,CAhBD,EAiBH,CAlBD,IAkBM,CACF,MAAKQ,QAAL,CAAc,CAACR,KAAK,CAAE,EAAR,CAAd,EACH,CACJ,C,8EAEO,oBAEGG,CAAAA,OAFH,CAEc,KAAKY,KAFnB,CAEGZ,OAFH,CAIJ,mBACI,aAAK,SAAS,CAAC,cAAf,wBACI,aAAK,SAAS,CAAC,kBAAf,wBACI,KAAC,IAAD,EAAM,SAAS,CAAC,cAAhB,CAA+B,EAAE,CAAC,GAAlC,mBADJ,cAEI,YAAK,SAAS,CAAC,4BAAf,uBACI,cAAO,IAAI,CAAC,MAAZ,CACO,WAAW,CAAC,2BADnB,CAEO,QAAQ,CAAI,kBAACa,KAAD,QAAW,CAAA,MAAI,CAACf,WAAL,CAAiBe,KAAK,CAACC,MAAN,CAAaC,KAA9B,CAAoCf,OAApC,CAAX,EAFnB,EADJ,EAFJ,GADJ,cASI,YAAK,SAAS,CAAC,sBAAf,uBACI,WAAI,SAAS,CAAC,YAAd,uBACI,oBACK,KAAKJ,KAAL,CAAWC,KAAX,CAAiBmB,GAAjB,CAAqB,SAACP,IAAD,CAAMQ,CAAN,qBACjB,KAAC,IAAD,EAAc,IAAI,CAAER,IAApB,CACc,eAAe,CAAE,yBAACA,IAAD,CAAME,KAAN,QAAc,CAAA,MAAI,CAACC,KAAL,CAAWM,eAAX,CAA2BT,IAA3B,CAAgCE,KAAhC,CAAd,EAD/B,EAAWM,CAAX,CADiB,EAArB,CADL,EADJ,EADJ,EATJ,GADJ,CAsBH,C,yBAxDqB3B,S,EA2D1B,cAAeK,CAAAA,WAAf","sourcesContent":["import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport Book from './Book'\r\nimport * as BooksAPI from './utils/BooksAPI'\r\n\r\nconst MAX_RESULTS = 14\r\n\nclass SearchBooks extends Component {\r\n\r\n    state = {\r\n        books: []\r\n    }\r\n\r\n    searchBooks = (query,myBooks) => {\r\n        if(query){\r\n            BooksAPI.search(query.trim(), MAX_RESULTS).then((books) => {\r\n                if(books.error){\r\n                    this.setState({books: []})\r\n                } else {\r\n                    books.filter(b => {\r\n                          let filteredBook = myBooks.filter(book => book.id===b.id)\r\n                          if(filteredBook && filteredBook[0]){\r\n                              b.shelf = filteredBook[0].shelf\r\n                          } else {\r\n                              b.shelf = 'none'\r\n                          }\r\n                          return b\r\n                    })\r\n                    this.setState(state =>({books : books}))\r\n                }\r\n\r\n            })\r\n        } else{\r\n            this.setState({books: []})\r\n        }\r\n    }\r\n\n    render(){\r\n\r\n        const {myBooks} = this.props\r\n\n        return(\n            <div className='search-books'>\n                <div className='search-books-bar'>\n                    <Link className='close-search' to='/'>Close</Link>\n                    <div className='search-books-input-wrapper'>\n                        <input type='text'\n                               placeholder='Search by title or author'\n                               onChange = {(event) => this.searchBooks(event.target.value,myBooks)}/>\r\n                    </div>\n                </div>\n                <div className='search-books-results'>\n                    <ol className='books-grid'>\n                        <li>\n                            {this.state.books.map((book,i) =>\r\n                                (<Book key={i} book={book}\n                                               moveBookToShelf={(book,shelf)=>this.props.moveBookToShelf(book,shelf)}/>)\n                            )}\n                        </li>\n                    </ol>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default SearchBooks\n"]},"metadata":{},"sourceType":"module"}